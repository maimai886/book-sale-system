{"version":3,"file":"static/js/143.b0388879.chunk.js","mappings":"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","sources":["components/TableForm/index.tsx","request/request.ts","request/index.ts","webpack://book-sale-system/./src/views/Page04/page04.module.scss?d4a1","views/Page04/Page04.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Table } from 'antd';\r\nimport type { ColumnsType, TableProps } from 'antd/es/table';\r\n\r\ninterface TableData<T> {\r\n  columns: ColumnsType<T>;\r\n  data: T[];\r\n  onChange: TableProps<T>['onChange'];\r\n}\r\n\r\n\r\nconst TableForm = <T extends Record<string, any>>(props: TableData<T>) =>\r\n  <Table columns={props.columns} dataSource={props.data} onChange={props.onChange} />;\r\n\r\nexport default TableForm;","import axios, { AxiosRequestConfig, AxiosRequestHeaders,AxiosResponse  } from 'axios';\r\nimport { showMessage } from \"./status\";\r\nimport { message as messageApi } from 'antd';\r\n\r\n/**\r\n * 創建axios實例\r\n */\r\nconst ENV = process.env.NODE_ENV;\r\nconst host = ENV === 'development' ? 'http://127.0.0.1:3000' : 'http://54.244.89.138:3000';\r\nconst service = axios.create({\r\n    baseURL: host,\r\n    timeout: 3000,\r\n});\r\n\r\ninterface ResType {\r\n  [key: string]: any;\r\n    code:number;\r\n    message?:string;\r\n    data?:Object;\r\n}\r\n\r\n/**\r\n * 請求攔截\r\n */\r\n\r\nservice.interceptors.request.use((config: any) => {\r\n    const token = localStorage.getItem('token')\r\n    if (token) {\r\n        config.headers = {\r\n            ...config.headers,\r\n            Authorization: token\r\n        };\r\n    }\r\n    return config\r\n})\r\n\r\n\r\n/**\r\n * 響應攔截\r\n */\r\nservice.interceptors.response.use((res:AxiosResponse<any>) => {\r\n    console.log(res)\r\n    const { code, data, message, token } = res.data;\r\n    if (code == 0) {\r\n\r\n\r\n        if (data.action == 'register' || data.action == 'login') {\r\n            messageApi.open({\r\n                type: 'success',\r\n                content: `${message}`,\r\n            });\r\n        }\r\n\r\n        if (res.data.data) {\r\n            res.data.data = backToFront(res.data.data);\r\n          }\r\n\r\n    } else if (message == '身份認證失敗') {\r\n        localStorage.setItem('token', 'custom')\r\n\r\n        messageApi.open({\r\n            type: 'warning',\r\n            content: `まだログインしていないため、一部の機能が使えませんかもしれません`,\r\n        });\r\n\r\n    } else {\r\n        messageApi.open({\r\n            type: 'warning',\r\n            content: `${message}`,\r\n        });\r\n    }\r\n    return res.data;\r\n});\r\n\r\n/**\r\n * 封裝請求函數\r\n */\r\nconst request = (options: AxiosRequestConfig<any>) => {\r\n    if (options.method === 'get') {\r\n        options.params = options.data;\r\n    }\r\n    return service(options);\r\n};\r\n\r\nfunction backToFront(params:ResType) {\r\n    if (typeof params === 'object') {\r\n        for (let key in params) {\r\n          let newKey = key;\r\n          if (key.includes('_')) {\r\n            newKey = key.replaceAll(/_([a-zA-Z])/g, (match, p1) => p1.toUpperCase());\r\n          }\r\n          if (newKey !== key) {\r\n            params[newKey] = params[key];\r\n            delete params[key];\r\n          }\r\n          if (typeof params[newKey] === 'object') {\r\n            params[newKey] = backToFront(params[newKey]);\r\n          }\r\n        }\r\n      }\r\n      return params;\r\n}\r\n\r\nexport default request;","import { PurchaseDetailData } from 'src/views/Page04/page04.interface';\r\nimport request from './request'\r\n\r\n//登録\r\nexport const LoginApi = (data: any) => request({ method: 'post', url: '/api/v1/user/login', data });\r\n//新規\r\nexport const registerApi = (data: any) => request({ method: 'post', url: '/api/v1/user/register', data });\r\n\r\n/**\r\n * Page02\r\n */\r\n\r\nexport const bookInfoApi = (data: any) => request({ method: 'post', url: '/api/v1/book/bookInfo', data });\r\n\r\nexport const itemInfoApi = (data: any) => request({ method: 'post', url: '/api/v1/user/itemInfo', data });\r\n\r\n\r\n/**\r\n * Page04\r\n */\r\n\r\nexport const purchaseInfoApi = async (data: any)=> {\r\n    const response = await request({ method: 'post', url: '/api/v1/purchase/purchaseInfo', data });\r\n    return response.data;\r\n  };\r\n  \r\n  \r\n/**\r\n * Page05\r\n */\r\n\r\nexport const sellInfoApi = async (data: any)=> {\r\n  const response = await request({ method: 'post', url: '/api/v1/sell/sellInfo', data });\r\n  return response.data;\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"main\":\"page04_main__-FujN\",\"title\":\"page04_title__ggXLL\"};","\r\nimport type { ColumnsType, TableProps } from 'antd/es/table';\r\nimport { useEffect, useState } from \"react\"\r\nimport TableForm from \"src/components/TableForm\"\r\nimport { purchaseInfoApi } from 'src/request';\r\nimport request from 'src/request/request';\r\nimport { PurchaseDetailData } from './page04.interface';\r\nimport style from './page04.module.scss'\r\n\r\n\r\n\r\n\r\nconst columns: ColumnsType<PurchaseDetailData > = [\r\n    {\r\n        title: '書籍名',\r\n        dataIndex: 'bookName',\r\n        width: '50%',\r\n    },\r\n    {\r\n        title: '量',\r\n        dataIndex: 'amount',\r\n        width: '10%',\r\n        sorter: {\r\n            compare: (a, b) => a.amount - b.amount,\r\n            multiple: 3,\r\n        },\r\n    },\r\n    {\r\n        title: '価格',\r\n        dataIndex: 'price',\r\n        width: '10%',\r\n        sorter: {\r\n            compare: (a, b) => a.price - b.price,\r\n            multiple: 2,\r\n        },\r\n    },\r\n    {\r\n        title: '総額',\r\n        dataIndex: 'total',\r\n        width: '15%',\r\n        sorter: {\r\n            compare: (a, b) => a.total - b.total,\r\n            multiple: 1,\r\n        },\r\n    },\r\n    {\r\n        title: '入荷日',\r\n        dataIndex: 'purchaseDate',\r\n        sorter: {\r\n            compare: (a, b) =>   Date.parse(a.purchaseDate) - Date.parse(b.purchaseDate),\r\n            multiple: 1,\r\n        },\r\n    },\r\n];\r\n\r\nconst onChange: TableProps<PurchaseDetailData >['onChange'] = (pagination, filters, sorter, extra) => {\r\n    console.log('params', pagination, filters, sorter, extra);\r\n};\r\n\r\nconst Page04 = () => {\r\n\r\n    //状態定義\r\n    \r\n  const [data, setData] = useState<PurchaseDetailData[]>([]);\r\n    /**\r\n     * 関数定義\r\n     */\r\n    //明細取得処理\r\n    async function purchaseDetail(params: any): Promise<void>  {\r\n        const result = await purchaseInfoApi(null);\r\n        for (const key in result) {\r\n            console.log(666,result[key])\r\n            setData(result[key])\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 監視定義\r\n     */\r\n    useEffect(() => {\r\n        purchaseDetail(null)\r\n    }, [])\r\n\r\n    return (\r\n        <div className={style.main}>\r\n        <div className={style.title}>出荷明細</div>\r\n            <TableForm columns={columns} data={data} onChange={onChange} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Page04"],"names":["props","_jsx","Table","columns","dataSource","data","onChange","service","axios","baseURL","timeout","interceptors","request","use","config","token","localStorage","getItem","headers","_objectSpread","Authorization","response","res","console","log","_res$data","code","message","action","messageApi","type","content","concat","backToFront","setItem","params","key","newKey","includes","replaceAll","match","p1","toUpperCase","options","method","LoginApi","url","registerApi","bookInfoApi","itemInfoApi","purchaseInfoApi","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","sent","abrupt","stop","_x","apply","arguments","sellInfoApi","_ref2","_callee2","_context2","_x2","title","dataIndex","width","sorter","compare","a","b","amount","multiple","price","total","Date","parse","purchaseDate","pagination","filters","extra","_useState","useState","_useState2","_slicedToArray","setData","_purchaseDetail","result","useEffect","purchaseDetail","_jsxs","className","style","children","TableForm"],"sourceRoot":""}